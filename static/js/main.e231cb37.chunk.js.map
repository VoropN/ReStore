{"version":3,"sources":["actions/index.ts","components/error-indicator/error-indicator.tsx","services/bookstore-service.ts","components/bookstore-service-context/bookstore-sevice-context.ts","components/spinner/spinner.tsx","components/book-list-item/book-list-item.tsx","components/book-list/book-list.tsx","components/book-list/book-list-container.tsx","components/hoc/with-bookstore-service.tsx","components/shopping-cart-table/shopping-cart-table.tsx","components/pages/home-page.tsx","components/pages/cart-page.tsx","components/shop-header/shop-header.tsx","components/app/app.tsx","reducers/book-list.ts","reducers/shopping-cart.ts","store.ts","reducers/index.ts","components/error-boundary/error-boundary.tsx","index.tsx"],"names":["bookAddedToCart","bookId","type","payload","ErrorIndicator","error","BookStoreService","data","id","title","author","price","src","Promise","res","rej","setTimeout","bookStoreService","BookStoreServiceContext","React","createContext","Spinner","BookListItem","book","onAddedToCart","alt","className","onClick","BookList","books","map","compose","Wrapped","props","bookStoreServiceContext","useContext","connect","bookList","loading","dispatch","fetchBooks","getBooks","then","catch","booksError","useEffect","message","mapStateToDispatch","onIncrease","onDecrease","onDelete","shoppingCart","items","cartItems","total","orderTotal","idx","count","HomePage","CartPage","useSelector","state","numItems","itemPlural","length","bookPlural","ShopHeader","to","App","path","exact","component","updateBookList","action","undefined","updateBook","booId","quantity","findIndex","item","slice","newCount","newBook","updateShoppingCart","find","reduce","acc","cur","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","ErrorBoundary","hasError","this","setState","children","Component","ReactDOM","render","StrictMode","Provider","value","document","getElementById"],"mappings":"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","file":"static/js/main.e231cb37.chunk.js","sourcesContent":["const booksRequested = () => {\n  return {\n    type: 'FETCH_BOOKS_REQUEST',\n  };\n};\n\nconst booksLoaded = (newBook: any) => {\n  return {\n    type: 'FETCH_BOOKS_SUCCESS',\n    payload: newBook\n  };\n};\n\nconst booksError = (error: any) => {\n  return {\n    type: 'FETCH_BOOKS_FAILURE',\n    payload: error\n  };\n};\n\nexport const fetchBooks = (bookStoreService: any, dispatch: any) => {\n  dispatch(booksRequested());\n  bookStoreService\n    .getBooks()\n    .then((data: any) => dispatch(booksLoaded(data)))\n    .catch((error: any) => dispatch(booksError(error)));\n};\n\nexport const bookAddedToCart = (bookId: number) => {\n  return {\n    type: 'BOOK_ADDED_TO_CART',\n    payload: bookId\n  };\n};\n\nexport const bookDeletedFromCart = (bookId: number) => {\n  return {\n    type: 'BOOK_DELETED_FROM_CART',\n    payload: bookId\n  }\n}\n\nexport const allBooksDeletedById = (bookId: number) => {\n  return {\n    type: 'ALL_BOOKS_DELETED',\n    payload: bookId\n  }\n}\n","import React from 'react';\n\nconst ErrorIndicator = ({ error }: any = {}) => {\n  return (\n    <div>\n      <b>Error!: </b>\n      {error}\n    </div>\n  )\n};\n\nexport default ErrorIndicator;\n","export class BookStoreService {\n  data = [\n    {\n      id: 1,\n      title: 'Production-Ready Microservices',\n      author: 'Susan J.Fowler',\n      price: 100,\n      src: 'https://m.media-amazon.com/images/I/41lIRLqbhAL.jpg'\n    },\n    {\n      id: 2,\n      title: 'Release It!',\n      author: 'Michael T.Nygard',\n      price: 200,\n      src: 'https://m.media-amazon.com/images/I/51glvDxhBqL.jpg'\n    }\n  ];\n\n  getBooks() {\n    return new Promise((res, rej) => setTimeout(() => res(this.data), 500));\n  }\n}\n","import React from 'react';\nimport { BookStoreService } from '../../services';\n\nconst bookStoreService = new BookStoreService();\n\nexport const BookStoreServiceContext = React.createContext(bookStoreService);\n","import React from 'react';\n\nconst Spinner = () => {\n  return <div>Loading...</div>\n}\n\nexport default Spinner;\n","import React from 'react';\nimport './book-list-item.scss';\n\nconst BookListItem = ({book, onAddedToCart}: any) => {\n  return (\n    <>\n      <img alt='book' className='book-image' src={book.src} />\n      <div className='book-content'>\n        <h6 className='book-title'>{book.title}</h6>\n        <div className='book-author'>\n          <b>Author:</b> {book.author}\n        </div>\n        <div className='book-price'>${book.price}</div>\n        <button onClick={onAddedToCart} className='btn btn-primary btn-add'>\n          Add to cart\n        </button>\n      </div>\n    </>\n  );\n};\n\nexport default BookListItem;\n","import React from 'react';\nimport BookListItem from '../book-list-item';\n\nconst BookList = ({books, onAddedToCart}: any) => {\n  return (\n    <ul className='book-list'>\n      {books.map((book: any) => (\n        <li className='book-list__item' key={book.id}>\n          <BookListItem\n            book={book}\n            onAddedToCart={() => onAddedToCart(book.id)}\n          />\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default BookList;\n","import React, {useEffect} from 'react';\nimport {connect} from 'react-redux';\nimport {compose} from 'redux';\nimport {bookAddedToCart, fetchBooks} from '../../actions';\nimport ErrorIndicator from '../error-indicator';\nimport {withBookStoreService} from '../hoc';\nimport Spinner from '../spinner';\nimport BookList from './book-list';\nimport './book-list.scss';\n\nconst BookListContainer = ({\n  books,\n  loading,\n  error,\n  fetchBooks,\n  onAddedToCart,\n}: any) => {\n  useEffect(() => {\n    fetchBooks();\n  }, [fetchBooks]);\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  if (error) {\n    return <ErrorIndicator error={error.message} />;\n  }\n\n  return <BookList books={books} onAddedToCart={onAddedToCart} />;\n};\n\nconst mapStateToProps = ({ bookList: { books, loading, error } }: any) => ({\n  books,\n  loading,\n  error,\n});\nconst mapDispatchToProps = (dispatch: any, {bookStoreService}: any) => {\n  return {\n    fetchBooks: () => fetchBooks(bookStoreService, dispatch),\n    onAddedToCart: (id: any) => dispatch(bookAddedToCart(id)),\n  };\n};\n\nexport default compose(\n  withBookStoreService(),\n  connect(mapStateToProps, mapDispatchToProps),\n)(BookListContainer);\n","import React, { useContext } from 'react';\nimport { BookStoreServiceContext } from '../bookstore-service-context';\n\nexport const withBookStoreService = () => (Wrapped: any) => (props: any) => {\n  const bookStoreServiceContext = useContext(BookStoreServiceContext);\n\n  return <Wrapped {...props} bookStoreService={bookStoreServiceContext} />;\n};\n\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { allBooksDeletedById, bookAddedToCart, bookDeletedFromCart } from '../../actions';\nimport './shopping-cart-table.scss';\n\nconst ShoppingCartTable = ({items, total, onIncrease, onDecrease, onDelete}: any) => {\n  const renderRow = ({id, title, total, count}: any, idx: number) => {\n    return (\n      <tr key={id} className='shopping-cart-item'>\n        <td>{idx + 1}</td>\n        <td>{title}</td>\n        <td>{count}</td>\n        <td>${total}</td>\n        <td className='actions-button'>\n          <i className='btn btn-success fa fa-plus-circle' onClick={() => onIncrease(id)} />\n          <i className='btn btn-warning fa fa-minus-circle' onClick={() => onDecrease(id)} />\n          <i className='btn btn-danger fa fa-trash-o' onClick={() => onDelete(id)}/>\n        </td>\n      </tr>\n    );\n  }\n\n  return (\n    <div className='shopping-cart'>\n      <table className='shopping-cart-table'>\n        <thead>\n          <tr className='shopping-cart-title'>\n            <th>#</th>\n            <th>Books</th>\n            <th>Count</th>\n            <th>Total</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n        <tbody>{items.map(renderRow)}</tbody>\n      </table>\n      <div className='shopping-cart-total'>\n        Total: <div className='sum'> ${total}</div>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }: any) => ({\n  items: cartItems,\n  total: orderTotal\n});\n\nconst mapStateToDispatch = {\n  onIncrease: bookAddedToCart,\n  onDecrease: bookDeletedFromCart,\n  onDelete: allBooksDeletedById,\n};\n\nexport default connect(mapStateToProps, mapStateToDispatch)(ShoppingCartTable);\n","import React from 'react';\nimport BookListContainer from '../book-list';\nimport ShoppingCartTable from '../shopping-cart-table';\n\nconst HomePage = () => {\n  return (\n    <>\n      <BookListContainer />\n      <ShoppingCartTable/>\n    </>\n  );\n};\n\nexport default HomePage;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport ShoppingCartTable from '../shopping-cart-table';\n\nconst CartPage = () => {\n    const {orderTotal, numItems, cartItems} = useSelector(\n      (state: any) => state.shoppingCart,\n    );\n    const itemPlural = cartItems.length > 1 && 's';\n    const bookPlural = numItems > 1 && 's';\n  return (\n    <>\n      <h1>Cart</h1>\n      <div>\n        You order <b>{cartItems.length}</b> item{itemPlural},<b> {numItems}</b>{' '}\n        book{bookPlural}, totaling <b>${orderTotal}</b>\n      </div>\n      <ShoppingCartTable />\n    </>\n  );\n}\n\nexport default CartPage;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport './shop-header.scss';\n\nconst ShopHeader = ({ numItems, total }: any) => {\n  return (\n    <div className='header'>\n      <Link to='/'>\n        <h3>ReStore</h3>\n      </Link>\n      <Link to='/cart/'>\n        <div className='cart'>\n          <i className='cart-icon fa fa-shopping-cart' />\n          {numItems} book{numItems > 1 && 's'}\n          <div className='total'> (${total})</div>\n        </div>\n      </Link>\n    </div>\n  );\n};\n\nexport default ShopHeader;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { Route, Switch } from 'react-router-dom';\nimport {HomePage, CartPage} from '../pages';\nimport ShopHeader from '../shop-header';\nimport './app.scss';\n\nexport const App = () => {\n  const {orderTotal, numItems} = useSelector((state: any) => state.shoppingCart);\n\n  return (\n    <>\n      <ShopHeader numItems={numItems} total={orderTotal} />\n      <div className='main'>\n        <Switch>\n          <Route path='ReStore/books/' exact component={HomePage} />\n          <Route path='ReStore/cart/' component={CartPage} />\n        </Switch>\n      </div>\n    </>\n  );\n};\n\nexport default App;\n","export const updateBookList = (state: any, action: any) => {\n  if (state === undefined) {\n    return {\n      books: [],\n      loading: true,\n      error: null,\n    }\n  }\n\n  switch (action.type) {\n    case 'FETCH_BOOKS_REQUEST':\n      return {\n        books: [],\n        loading: true,\n        error: null,\n      };\n    case 'FETCH_BOOKS_SUCCESS':\n      return {\n        books: action.payload,\n        loading: false,\n        error: null,\n      };\n    case 'FETCH_BOOKS_FAILURE':\n      return {\n        books: [],\n        loading: false,\n        error: action.payload,\n      };\n    default:\n      return state.bookList;\n  }\n};\n","\nconst updateBook = (items: any[], booId: number, quantity: number) => {\n  const idx = items.findIndex((item) => item.id === booId);\n  const { id, title, price, total, count }: any = items[idx];\n\n  if (count + quantity <= 0) {\n    return [\n      ...items.slice(0, idx),\n      ...items.slice(idx + 1),\n    ]\n  }\n\n  const newCount = count + quantity;\n  const newBook = { id, title, price, total: total + price * newCount, count: newCount };\n\n  return [\n    ...items.slice(0, idx),\n    newBook,\n    ...items.slice(idx + 1),\n  ]\n}\n\nexport const updateShoppingCart = (state: any, action: any) => {\n  if (state === undefined) {\n    return {\n      cartItems: [],\n      orderTotal: 0,\n      numItems: 0\n    }\n  }\n\n  switch (action.type) {\n    case 'BOOK_ADDED_TO_CART':\n      const bookId = action.payload;\n      const idx = state.shoppingCart.cartItems.findIndex((item: any) => item.id === bookId);\n      const { id, title, price }: any = state.bookList.books.find((book: any) => book.id === bookId);\n      const newBook = { id, title, price, total: price, count: 1 };\n\n      const cartItems = idx !== -1\n        ? updateBook(state.shoppingCart.cartItems, bookId, 1)\n        : [...state.shoppingCart.cartItems, newBook]\n\n      return {\n        ...state,\n        cartItems,\n        orderTotal: cartItems.reduce((acc, cur) => acc + cur.total, 0),\n        numItems: cartItems.reduce((acc, cur) => acc + cur.count, 0)\n      };\n    case 'BOOK_DELETED_FROM_CART': {\n      const cartItems = updateBook(state.shoppingCart.cartItems, action.payload, -1);\n      return {\n        ...state,\n        cartItems,\n        orderTotal: cartItems.reduce((acc, cur) => acc + cur.total, 0),\n        numItems: cartItems.reduce((acc, cur) => acc + cur.count, 0)\n      };\n    }\n    case 'ALL_BOOKS_DELETED': {\n      const count = state.shoppingCart.cartItems.find((item: any) => item.id === action.payload).count;\n      const cartItems = updateBook(state.shoppingCart.cartItems, action.payload, -count);\n      return {\n        ...state,\n        cartItems,\n        orderTotal: cartItems.reduce((acc, cur) => acc + cur.total, 0),\n        numItems: cartItems.reduce((acc, cur) => acc + cur.count, 0)\n      };\n    }\n    default:\n      return state.shoppingCart;\n  }\n};\n","import { createStore } from 'redux';\nimport { reducer } from './reducers';\n\nexport const store = createStore(\n  reducer,\n  (window as any).__REDUX_DEVTOOLS_EXTENSION__ && (window as any).__REDUX_DEVTOOLS_EXTENSION__()\n);\n","import { updateBookList } from './book-list'\nimport { updateShoppingCart } from './shopping-cart';\n\nexport const reducer = (state: any, action: any) => {\n  return {\n    bookList: updateBookList(state, action),\n    shoppingCart: updateShoppingCart(state, action)\n  }\n}\n","import React, { Component } from 'react';\nimport ErrorIndicator from '../error-indicator';\n\nexport default class ErrorBoundary extends Component {\n  state = {\n    hasError: false,\n  }\n\n  componentDidCatch() {\n    this.setState({ hasError: true });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />;\n    }\n\n    return this.props.children;\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/app';\nimport {BookStoreServiceContext} from './components/bookstore-service-context/bookstore-sevice-context';\nimport {BookStoreService} from './services';\nimport {Provider as StoreProvider} from 'react-redux';\nimport {store} from './store';\nimport ErrorBoundary from './components/error-boundary';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nconst bookStoreService = new BookStoreService();\n\nReactDOM.render(\n  <React.StrictMode>\n    <StoreProvider store={store}>\n      <ErrorBoundary>\n        <BookStoreServiceContext.Provider value={bookStoreService}>\n          <Router>\n            <App />\n          </Router>\n        </BookStoreServiceContext.Provider>\n      </ErrorBoundary>\n    </StoreProvider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}